"use strict";function run(e,n,t,o){e.$on("$routeChangeStart",function(e,n,t){}),e.facebookAppId="[]"}function keyboardCtrl(e,n){function t(n){console.log("letter again = ",r.letter),$(".highlightLetter").removeClass("highlightLetter")," "==n?o="spacebar":u.indexOf(n)>-1?o="c"+p[u.indexOf(n)]:(o="c"+p[f.indexOf(n)],$(".shiftKey").addClass("highlightLetter")),console.log("letter again = ",r.letter,o),e.find("."+o).addClass("highlightLetter")}var o,r=this,i=r.keyboard;console.log("letter = ",r.letter);var l=[];for(var a in i)for(var c=0;c<i[a].length;c++)l.push(i[a][c]);this.$onInit=function(){t(r.letter)};var p=(l.map(function(e){return e.en}),l.map(function(e){return e.code})),u=l.map(function(e){return e.np}),f=l.map(function(e){return e.npShift});console.log("in components",r.word,r.letter),this.$onChanges=function(e){console.log("changed in components",e.word,e.letter.currentValue),t(e.letter.currentValue)}}function HeaderCtrl(e){}function FooterCtrl(e){}function PractiseCtrl(e,n,t,o,r){function i(){var n=m.length,t=w[b].substring(0,n);console.log(m,t),m!=t?s.alert=!0:(s.alert=!1,j&&k++,k=n,j=!0,c()),e.$apply()}function l(){console.log("space has been pressed"),m===w[b]&&(k=0,v+=m+" ",m="",s.sentence=v,s.word=m,b++,x=x+k+1,k=0,e.$apply(),b>=s.text.length?(y=!0,r.cancel(g),stop=void 0):(a(),p()),f())}function a(){s.highlight=w[b],c()}function c(){var e=w[b].charAt(k);if(""==e)return void(s.highlightSingle=" ");s.highlightSingle=e}function p(){var e=b+1;t.find(".text span").removeClass("highlightWord"),t.find(".text > span:nth-child("+e+")").addClass("highlightWord")}function u(){var e=new Date;d=e.getTime(),g=r(function(){s.time+=1},1e3)}function f(){var e=new Date,n=e.getTime(),t=n-d;s.timeTaken=t;var o=x/6*6e4/t;s.speed=Math.round(o)}var s=this,h=(n.param,!0),d=0;s.time=0;var g,m="",v="",S=o.unicode,y=!1;s.sentence="",s.word="Type here",s.alert=!1,s.keyboard=S;var C="सानो छ खेत",w=C.split(" "),b=(w.length,0),k=0,x=0,j=!1;s.highlight=w[b],s.highlightSingle="",s.text=w;var A=[];for(var P in S)for(var U=0;U<S[P].length;U++)A.push(S[P][U]);var O=(A.map(function(e){return e.en}),A.map(function(e){return e.code}));A.map(function(e){return e.np}),A.map(function(e){return e.npShift});$(".writeArea").on("click",function(){t.find(".writeArea input").focus()}),t.find(".writeArea input").on("keydown",function(n){if(!y){h&&(h=!1,u());var t=n.which||n.charCode,o=n.shiftKey;if(8==t||46==t)console.log("backspace"),j&&k>0&&(k-=1,console.log("backspace",k)),m=m.substring(0,m.length-1),s.word=m,e.$apply(),i();else if(32==t)console.log("space has been pressed 1"),l();else{t+="";var r="";console.log("code = ",t,O.indexOf(t)),O.indexOf(t)>-1&&(r=o?A[O.indexOf(t)].npShift:A[O.indexOf(t)].np,console.log(r),m+=r,s.inputChar="",s.word=m,e.$apply(),i())}}}),s.highlightSingleFn=function(){y||c()},setTimeout(function(){p()},1e3)}function HomeCtrl(e){}var app=angular.module("typali",["ui.router","ngSanitize","angular-loading-bar"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,n,t){e.hashPrefix("!"),t.otherwise("/404"),n.state("app",{url:"",views:{"header@":{controller:"HeaderCtrl",templateUrl:"components/common/header/header.tpl.html",controllerAs:"vm"},"footer@":{controller:"FooterCtrl",templateUrl:"components/common/footer/footer.tpl.html",controllerAs:"vm"}}}).state("app.404",{url:"/404",views:{"header@":{templateUrl:"components/common/header/header.tpl.html"}}}),e.html5Mode(!0)}]).run(["$rootScope","$location","authentication","$window",run]);angular.module("typali").component("keyboard2",{templateUrl:"components/common/keyboard/keyboard.tpl.html",controller:keyboardCtrl,bindings:{keyboard:"<",word:"<",letter:"<",shift:"<"}}),keyboardCtrl.$inject=["$document","$scope"],angular.module("typali").controller("HeaderCtrl",HeaderCtrl),HeaderCtrl.$inject=["$scope"],angular.module("typali").controller("FooterCtrl",FooterCtrl),FooterCtrl.$inject=["$scope"],angular.module("typali").config(["$stateProvider",function(e){e.state("app.practise",{url:"/practise",views:{"container@":{templateUrl:"views/practise/practise.tpl.html",controller:"practiseCtrl",controllerAs:"vm"}}}).state("app.practise.param",{url:"/:param",views:{"container@":{templateUrl:"views/practise/practise.tpl.html",controller:"practiseCtrl",controllerAs:"vm"}}})}]).controller("practiseCtrl",PractiseCtrl),PractiseCtrl.$inject=["$scope","$stateParams","$document","keyboardlayout","$interval"],angular.module("typali").config(["$stateProvider",function(e){e.state("app.home",{url:"/",views:{"container@":{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}}})}]).controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$scope"],function(){function e(e,n){}angular.module("typali").config(["$stateProvider",function(e){e.state("app.register",{url:"/register",views:{"container@":{templateUrl:"auth/user-register/user-register.tpl.html",controller:"UserRegisterCtrl",controllerAs:"vm"}}})}]).controller("UserRegisterCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,n){var t=this;t.credentials={email:"yo@hotmail.com",password:""},t.onSubmit=function(){n.login(t.credentials).error(function(e){console.log(e)}).then(function(){e.path("profile")})}}angular.module("typali").config(["$stateProvider",function(e){e.state("app.login",{url:"/login",views:{"container@":{templateUrl:"auth/login/login.tpl.html",controller:"LoginCtrl",controllerAs:"vm"}}})}]).controller("LoginCtrl",e),e.$inject=["$location","authentication"]}(),angular.module("typali").factory("socket",["$rootScope",function(e){var n=io.connect();return{on:function(t,o){n.on(t,function(){var t=arguments;e.$apply(function(){o.apply(n,t)})})},emit:function(t,o,r){n.emit(t,o,function(){var t=arguments;e.$apply(function(){r&&r.apply(n,t)})})}}}]);var app=angular.module("typali");app.filter("limitobj",[function(){return function(e,n){if("object"!=typeof e)return[];var t=Object.keys(e);if(t.length<1||void 0===t)return[];var o=new Object,r=0;return angular.forEach(t,function(t,i){if(r>=n)return!1;o[t]=e[t],r++}),o}}]),angular.module("typali").factory("keyboardlayout",["$rootScope",function(e){var n={};return n.unicode={qwerty:[{code:"81",en:"q",npShift:"ठ",np:"ट"},{code:"87",en:"w",npShift:"औ",np:"ौ"},{code:"69",en:"e",npShift:"ै",np:"े"},{code:"82",en:"r",npShift:"ृ",np:"र"},{code:"84",en:"t",npShift:"थ",np:"त"},{code:"89",en:"y",npShift:"ञ",np:"य"},{code:"85",en:"u",npShift:"ू",np:"ु"},{code:"73",en:"i",npShift:"ी",np:"ि"},{code:"79",en:"o",npShift:"ओ",np:"ो"},{code:"80",en:"p",npShift:"फ",np:"प"},{code:"219",en:"[",npShift:"ई",np:"इ"},{code:"221",en:"]",npShift:"ऐ",np:"ए"},{code:"220",en:"\\",npShift:"ः",np:"ॐ"}],asdfg:[{code:"65",en:"a",npShift:"आ",np:"ा"},{code:"83",en:"s",npShift:"श",np:"स"},{code:"68",en:"d",npShift:"ध",np:"द"},{code:"70",en:"f",npShift:"ऊ",np:"उ"},{code:"71",en:"g",npShift:"घ",np:"ग"},{code:"72",en:"h",npShift:"अ",np:"ह"},{code:"74",en:"j",npShift:"झ",np:"ज"},{code:"75",en:"k",npShift:"ख",np:"क"},{code:"76",en:"l",npShift:"॥",np:"ल"},{code:"186",en:"l",npShift:":",np:";"},{code:"222",en:"l",npShift:'"',np:"'"}],zxcvb:[{code:"90",en:"z",npShift:"ऋ",np:"ष"},{code:"88",en:"x",npShift:"ढ",np:"ड"},{code:"67",en:"c",npShift:"च",np:"छ"},{code:"86",en:"v",npShift:"ँ",np:"व"},{code:"66",en:"b",npShift:"भ",np:"ब"},{code:"78",en:"n",npShift:"ण",np:"न"},{code:"77",en:"m",npShift:"ं",np:"म"},{code:"188",en:",",npShift:"ङ",np:","},{code:"190",en:".",npShift:">",np:"।"},{code:"191",en:"/",npShift:"?",np:"्"}],1234:[{code:"192",en:"`",enShift:"~",npShift:"~",np:"`"},{code:"49",en:"1",npShift:"!",np:"१"},{code:"50",en:"2",npShift:"@",np:"२"},{code:"51",en:"3",npShift:"#",np:"३"},{code:"52",en:"4",npShift:"रु",np:"४"},{code:"53",en:"5",npShift:"%",np:"५"},{code:"54",en:"6",npShift:"^",np:"६"},{code:"55",en:"7",npShift:"&",np:"७"},{code:"56",en:"8",npShift:"*",np:"८"},{code:"59",en:"9",npShift:"(",np:"९"},{code:"48",en:"0",npShift:")",np:"०"},{code:"189",en:"-",npShift:"_",np:"-"},{code:"187",en:"=",npShift:"+‍‌‍‍‍‍",np:"="}]},n}]);var app=angular.module("typali");app.filter("filterByProperty",["$filter",function(e){return function(n,t,o){if(console.log("reached here",t,o),n){if(t){if("$"===o)return e("filter")(n,t);console.log(t);var r=t.toString().toLowerCase();return n.filter(function(e){return e[o].toString().toLowerCase().indexOf(r)>-1})}return n}}}]),angular.module("typali").filter("capitalize",function(){return function(e,n){var t=n?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return e?e.replace(t,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""}}),function(){function e(e,n){var t=function(e){n.localStorage["typali-token"]=e},o=function(){return n.localStorage["typali-token"]},r=function(){var e,t=o();return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)};return{currentUser:function(){if(r()){var e=o(),t=e.split(".")[1];return t=n.atob(t),t=JSON.parse(t),{email:t.email,name:t.name}}},saveToken:t,getToken:o,isLoggedIn:r,register:function(n){return e.post("/api/register",n).success(function(e){t(e.token)})},login:function(n){return e.post("/api/login",n).success(function(e){console.log(e.token),t(e.token)})},logout:function(){n.localStorage.removeItem("typali-token")}}}angular.module("typali").service("authentication",e),e.$inject=["$http","$window"]}(),angular.module("typali.common",[]);